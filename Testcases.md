# TESTCASES

##  Ручка 1

1. (Create Ad) Успешное создание объявления
**Описание:** Проверить, что при отправке корректных данных сервер возвращает код 200 и объявление создается успешно
**Предусловия:**
Сервис доступен по адресу https://qa-internship.avito.com.
**Шаги:**
Отправить POST-запрос на эндпоинт /api/1/item  с телом, содержащим необходимые поля:
```json
{
  "sellerID": 8800,
  "name": "Рабочая тетрадь",
  "price": 1200
}
```
**Ожидаемый результат:** запрос отправлен
Убедиться, что в полученном ответе код ответа=200 OK
**Ожидаемый результат:** В полученном ответе код ответа=200 OK
Проверить, что status имеет тип данных=string
**Ожидаемый результат: status:** `{ type: string }`

1.2 (Create Ad) Отсутствует обязательное поле name
**Описание:** Проверить, что при отсутствии обязательного поля name в запросе сервис возвращает 400 Bad Request.
**Предусловия:**
Сервис доступен по адресу https://qa-internship.avito.com.
**Шаги:**
Отправить POST-запрос на эндпоинт /api/1/item  с телом, содержащим необходимые поля:
```json
{
  "sellerID": 8800,
  "price": 2500
}
```
**Ожидаемый результат:** запрос отправлен
Убедиться, что в полученном ответе код ответа=400 Bad request
**Ожидаемый результат:** В полученном ответе код ответа=400 Bad request
Проверить, что тело ответа содержит информацию об ошибке
**Ожидаемый результат: message:** `{ type: string }`

1.3 Неверный тип поля (sellerID как строка)
**Описание:** Проверить, что при передаче sellerID в виде строки вместо целого числа сервис вернет 400 Bad Request
**Предусловия:**
Сервис доступен по адресу https://qa-internship.avito.com.
**Шаги:**
Отправить POST-запрос на эндпоинт /api/1/item  с телом, содержащим необходимые поля:
```json
{
  "sellerID": "abc",
  "name": "Смартфон",
  "price": 10000
}
```
**Ожидаемый результат:** запрос отправлен
Убедиться, что в полученном ответе код ответа=400 Bad request
**Ожидаемый результат:** В полученном ответе код ответа=400 Bad request
Проверить, что тело ответа содержит информацию о неверном формате поля sellerID
**Ожидаемый результат: message:** `{ type: string }`, тело ответа содержит информацию о неверном формате поля sellerID

##  Ручка 2 /api/1/item/:id

### 2.1 Успешное получение объявления по id
**Описание:** Проверить, что при запросе к существующему id сервер возвращает статус 200 и корректные поля в теле ответа
**Предусловия:**
Ранее было создано объявление с id = "fe5ae029-e567-4dd4-ad35-0b27c2b4d432".
**Шаги:**
1. Отправить GET /api/1/item/fe5ae029-e567-4dd4-ad35-0b27c2b4d432.
2. Проверить, что код ответа 200 OK.
3. Убедиться, что в теле ответа есть массив с хотя бы одним объектом, у которого:
  - id = "fe5ae029-e567-4dd4-ad35-0b27c2b4d432"
  - sellerId (целое число) 880
  - name (строка) "Рабочая тетрадь"
  - price (целое число) 1200
  - statistics (объект с likes=0, viewCount=0, contacts=0)
**Ожидаемый результат:** запрос отправлен
1. Статус-код 200 OK.
2. Тело ответа содержит необходимые поля, соответствующие объявлениям с id = "fe5ae029-e567-4dd4-ad35-0b27c2b4d432".

### 2.2 Запрос объявления по несуществующему id
**Описание:** Проверить, что при отсутствии объявления возвращается 404.
**Предусловия:**
Убедиться, что id = "9999999" точно не существует в базе.
**Шаги:**
1. Отправить GET /api/1/item/9999999.
2. Проверить, что код ответа 404 Not Found.
3. Проверить содержимое тела ответа (если по спецификации возвращается структура с result, status).
**Ожидаемый результат:** запрос отправлен
1. Статус-код 404 Not Found.
2. Тело ответа указывает на отсутствие объявления, **message:** `{ type: string }`

### 2.3 Ошибка сервера (500)
**Описание:** Проверить, что при возникновении внутренней ошибки возвращается 500.
**Предусловия:**
Сервис настроен на внутреннюю ошибку 
**Шаги:**
1. Отправить GET /api/1/item/123 в условиях, когда сервер не может корректно обработать запрос (например, недоступна база данных).
2. Проверить код ответа 500 Internal Server Error.
**Ожидаемый результат:** запрос отправлен
1. Статус-код 500 Internal Server Error.
2. Тело ответа содержит структуру с result, messages, status, согласно спецификации.

## Ручка 3 api/1/{sellerID}/item
### 3.1 Успешное получение списка по существующему sellerID
**Описание:** Проверить, что при указании корректного sellerID, у которого есть объявления, сервер вернёт код 200 и массив объявлений
**Предусловия:**
В базе есть хотя бы 2 объявления с sellerID = 8800
**Шаги:**
1. Отправить GET /api/1/8800/item.
2. Проверить, что код ответа 200 OK.
3. Убедиться, что в массиве не менее 2 объектов и все имеют sellerId: 123456.
**Ожидаемый результат:** запрос отправлен
1. Статус-код 200 OK.
2. Массив объектов с необходимыми полями и sellerId=8800.

### 3.2 Отсутствуют объявления у данного sellerID
**Описание:** Проверить, что при запросе у sellerID, у которого пока нет объявлений, возвращается 200 и массив пустой
**Предусловия:**
sellerID = 100500 не имеет объявлений
**Шаги:**
1. Отправить GET /api/1/100500/item.
2. Проверить ответ сервиса
**Ожидаемый результат:** запрос отправлен
1. Статус-код 200 OK.
2. Тело ответа содержит пустой массив.

### 3.3 ОНевалидный параметр sellerID
**Описание:** Проверить, что если передать в sellerID строку, то сервис вернет 400 код
**Предусловия:**
Сервис доступен по адресу https://qa-internship.avito.com.
**Шаги:**
1. Отправить GET /api/1/abc/item.
2. Проверить, что сервер вернёт 400 Bad Request.
**Ожидаемый результат:** запрос отправлен
1. Статус-код 400 Bad Request.
2. Тело ответа с описанием ошибки.

## Ручка 4

### 4.1 Успешное получение статистики по существующему id
**Описание**: Проверить, что при запросе статистики по существующему объявлению сервер возвращает статус 200 и объект с полями likes, viewCount, contacts.
**Предусловия**:
Существует объявление с id = "fe5ae029-e567-4dd4-ad35-0b27c2b4d432"
**Шаги:**
1. Отправить GET /api/1/statistic/fe5ae029-e567-4dd4-ad35-0b27c2b4d432
2. Проверить, что код ответа 200 OK.
3. Убедиться, что в теле ответа есть объект со следующими полями:
likes (int)
viewCount (int)
contacts (int)
Ожидаемый результат:
1. Статус-код 200 OK.
2. Тело ответа содержит статистику по объявлению likes (int)=0
viewCount (int)=0
contacts (int)=0.

### 4.2 Запрос статистики по несуществующему id
**Описание**: Проверить, что при отсутствии объявления с таким id возвращается 404 Not Found.
**Предусловия**:
товара с id = "555" не существует
**Шаги:**
1. Отправить GET /api/1/statistic/555.
2. Проверить, что код ответа 404 Not Found.
Ожидаемый результат:
1. Код ответа 404 Not Found
2. Тело ответа содержит структуру, где status указывает на ошибку, а result.messages содержит описание ошибки



